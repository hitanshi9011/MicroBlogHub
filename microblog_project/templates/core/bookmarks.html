{% extends 'base.html' %}
{% load static text_extras %}

{% block title %}Your Bookmarks | MicroBlogHub{% endblock %}

{% block content %}
<section class="posts-list">
  <h2>Your Bookmarks</h2>
  {% if posts %}
    {% for post in posts %}
      <article class="post">
        <div class="avatar">{% if post.user.profile and post.user.profile.photo %}
            <img src="{{ post.user.profile.photo.url }}" style="width:100%;height:100%;border-radius:50%;object-fit:cover;" />
          {% else %}{{ post.user.username|first|upper }}{% endif %}</div>
        <div class="post-main">
          <header class="post-header">
            <a href="{% url 'profile' post.user.username %}">@{{ post.user.username }}</a>
            <span class="post-dot">¬∑</span>
            <span class="post-time">{{ post.created_at|timesince }} ago</span>
          </header>

          <p class="post-body">{{ post.content|urlize|linkify_hashtags|linebreaksbr }}</p>

          <footer class="post-footer">
            <div class="post-actions">
              <div class="like-section">
                {% if post.id in liked_posts %}
                  <a href="{% url 'unlike' post.id %}" class="action-btn liked">‚ù§Ô∏è <span class="action-count">{{ post.like_count }}</span></a>
                {% else %}
                  <a href="{% url 'like' post.id %}" class="action-btn">ü§ç <span class="action-count">{{ post.like_count }}</span></a>
                {% endif %}
              </div>

                <div class="post-owner-actions">
                <a href="{% url 'post_detail' post.id %}" class="action-btn">View</a>
                <button class="action-btn bookmark-toggle" type="button" data-post-id="{{ post.id }}" data-bookmarked="1" data-toggle-url="{% url 'bookmark_toggle' post.id %}">Remove</button>
              </div>
            </div>
          </footer>
        </div>
      </article>
    {% endfor %}
  {% else %}
    <p>You haven't bookmarked any posts yet.</p>
  {% endif %}
</section>
{% endblock %}
